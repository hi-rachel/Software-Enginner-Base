## 이벤트

이벤트는 캡처링 단계에서 상위 → 하위로 전파되고,
타깃에서 실행된 후, 버블링 단계에서 하위 → 상위로 다시 전파됩니다.

일반적으로 핸들러는 버블링 단계에서 실행되며, 이 특성을 이용해 이벤트 위임 기법을 활용하면 성능을 최적화할 수 있습니다.

브라우저에서 이벤트가 발생하면 3단계를 거칩니다:

1. 캡처링 단계 (Capturing Phase)

   - 최상위(document → body)에서 이벤트가 발생한 타깃 요소까지 내려가면서 전파.
   - addEventListener(event, handler, { capture: true }) 로 감지 가능.

2. 타깃 단계 (Target Phase)
   - 이벤트가 실제로 발생한 요소(타깃)에서 실행. 3. 버블링 단계 (Bubbling Phase)
   - 타깃 요소에서 다시 상위 요소로 올라가면서 전파.
   - 기본적으로 이벤트 핸들러는 이 단계에서 실행됨.

---

이벤트 버블링 (Event Bubbling)

- 이벤트가 하위 → 상위 요소 방향으로 전파.
- 예: 버튼 클릭 → 버튼 → div → body → document 순서.
- event.stopPropagation()으로 막을 수 있음.
  > event.stopPropagation()은 다음 단계 전파를 중단합니다.
  > 같은 노드의 나머지 리스너까지 막으려면 event.stopImmediatePropagation().

---

이벤트 캡처링 (Event Capturing)

- 이벤트가 상위 → 하위 요소 방향으로 전파.
- 평소에는 잘 쓰이지 않지만, 특정 상황에서 버블링보다 먼저 이벤트를 잡고 싶을 때 활용.
- event.stopPropagation()으로 막을 수 있음.

---

이벤트 위임 (Event Delegation)

- 버블링을 활용한 패턴.
- 여러 자식 요소 각각에 이벤트 핸들러를 붙이는 대신, 상위 요소에 하나의 핸들러를 붙여서 이벤트를 처리.
- 성능 최적화 및 동적으로 추가되는 요소 처리에 유용.

```js
document.querySelector("ul").addEventListener("click", (e) => {
  if (e.target.tagName === "LI") {
    console.log("Clicked:", e.target.textContent);
  }
});
```

> DOM 표준에서 tagName을 일관되게 제공하기 위해 대문자로 반환하도록 정의됨
